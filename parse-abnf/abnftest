#!/usr/bin/perl -w

use strict;
use Data::Dumper;
use ABNF;

die "Usage: abnftest rule data (give rules on standard input)\n" unless scalar @ARGV == 2;

my @rules = <STDIN>;
my $rule = shift;
my $data = shift;
my $obj = Parse::ABNF->new(@rules);
warn Data::Dumper::Dumper($obj), "\n============\n";
my $parse = $obj->matches($rule, $data, "*");
die "No match!\n" unless $parse;
printparse $parse;
